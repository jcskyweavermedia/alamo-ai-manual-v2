<!DOCTYPE html>
<html lang="en" class="">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Review Insights — Alamo Prime</title>

  <!-- Tailwind CSS v3 CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Chart.js v4 CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4/dist/chart.umd.min.js"></script>

  <!-- Lucide Icons CDN -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>

  <!-- Tailwind Config -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            background: 'hsl(var(--background))',
            foreground: 'hsl(var(--foreground))',
            card: 'hsl(var(--card))',
            'card-foreground': 'hsl(var(--card-foreground))',
            muted: 'hsl(var(--muted))',
            'muted-foreground': 'hsl(var(--muted-foreground))',
            border: 'hsl(var(--border))',
            primary: 'hsl(var(--primary))',
          },
          borderRadius: {
            card: '1rem',
            pill: '0.875rem',
          },
          fontFamily: {
            sans: ['-apple-system', 'BlinkMacSystemFont', '"SF Pro Display"', '"SF Pro Text"', 'Inter', '"Segoe UI"', 'Roboto', 'Helvetica', 'Arial', 'sans-serif'],
            mono: ['ui-monospace', 'SFMono-Regular', '"SF Mono"', 'Menlo', 'Consolas', '"Liberation Mono"', 'monospace'],
          },
        },
      },
    };
  </script>

  <style>
    /* ===== CSS Custom Properties — Design Tokens ===== */
    :root {
      --background: 240 10% 98%;
      --foreground: 240 10% 7%;
      --card: 0 0% 100%;
      --card-foreground: 240 10% 7%;
      --muted: 240 5% 96%;
      --muted-foreground: 240 4% 38%;
      --border: 240 6% 90%;
      --primary: 146 60% 41%;
      --radius: 0.875rem;
      --radius-card: 1rem;
      --shadow-card: 0 1px 3px 0 rgb(0 0 0 / 0.04), 0 1px 2px -1px rgb(0 0 0 / 0.04);
    }

    .dark {
      --background: 240 10% 4%;
      --foreground: 240 5% 96%;
      --card: 240 10% 8%;
      --card-foreground: 240 5% 96%;
      --muted: 240 5% 15%;
      --muted-foreground: 240 5% 72%;
      --border: 240 5% 18%;
      --primary: 146 60% 50%;
    }

    /* ===== Base Styles ===== */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', Inter, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background-color: hsl(var(--background));
      color: hsl(var(--foreground));
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    /* ===== Utility Classes ===== */
    .tabular-nums {
      font-variant-numeric: tabular-nums;
    }

    .card {
      background-color: hsl(var(--card));
      color: hsl(var(--card-foreground));
      border-radius: var(--radius-card);
      box-shadow: var(--shadow-card);
      border: 1px solid hsl(var(--border));
      transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.2s ease;
    }

    .card-hover:hover {
      box-shadow: 0 4px 12px 0 rgb(0 0 0 / 0.08), 0 2px 4px -1px rgb(0 0 0 / 0.06);
      transform: translateY(-2px);
    }

    .dark .card-hover:hover {
      box-shadow: 0 4px 12px 0 rgb(0 0 0 / 0.3), 0 2px 4px -1px rgb(0 0 0 / 0.2);
    }

    /* Pill bar button styles */
    .pill-btn {
      padding: 0.375rem 0.875rem;
      border-radius: 0.625rem;
      font-size: 0.8125rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      border: none;
      background: transparent;
      color: hsl(var(--muted-foreground));
      white-space: nowrap;
    }

    .pill-btn:hover {
      color: hsl(var(--foreground));
      background-color: hsl(var(--muted));
    }

    .pill-btn.active {
      background-color: hsl(var(--primary));
      color: #fff;
    }

    /* Tab button styles */
    .tab-btn {
      padding: 0.5rem 1.25rem;
      font-size: 0.875rem;
      font-weight: 600;
      cursor: pointer;
      border: none;
      background: transparent;
      color: hsl(var(--muted-foreground));
      border-bottom: 2px solid transparent;
      transition: all 0.2s ease;
    }

    .tab-btn:hover {
      color: hsl(var(--foreground));
    }

    .tab-btn.active {
      color: hsl(var(--primary));
      border-bottom-color: hsl(var(--primary));
    }

    /* Scrollbar */
    .scroll-snap-x {
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
    }

    .scroll-snap-x > * {
      scroll-snap-align: start;
    }

    .scroll-snap-x::-webkit-scrollbar {
      height: 4px;
    }

    .scroll-snap-x::-webkit-scrollbar-track {
      background: hsl(var(--muted));
      border-radius: 2px;
    }

    .scroll-snap-x::-webkit-scrollbar-thumb {
      background: hsl(var(--border));
      border-radius: 2px;
    }

    /* Severity border accents */
    .severity-critical {
      border-left: 4px solid #EF4444;
    }

    .severity-high {
      border-left: 4px solid #F59E0B;
    }

    /* Own restaurant highlight */
    .own-restaurant {
      border: 2px dashed hsl(var(--primary));
    }

    /* Toggle chip */
    .toggle-chip {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      padding: 0.375rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 500;
      cursor: pointer;
      border: 1.5px solid hsl(var(--border));
      background: hsl(var(--card));
      color: hsl(var(--foreground));
      transition: all 0.2s ease;
      user-select: none;
    }

    .toggle-chip:hover {
      border-color: hsl(var(--muted-foreground));
    }

    .toggle-chip.active {
      border-color: var(--chip-color, hsl(var(--border)));
      background: color-mix(in srgb, var(--chip-color, hsl(var(--border))) 10%, hsl(var(--card)));
    }

    .toggle-chip .dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--chip-color, #888);
    }

    .toggle-chip:not(.active) {
      opacity: 0.5;
    }

    /* Sparkline container */
    .sparkline-container {
      height: 44px;
      width: 100%;
      position: relative;
    }

    /* Competitor card min-width for mobile scroll */
    @media (max-width: 767px) {
      .competitor-card {
        min-width: 200px;
        flex-shrink: 0;
      }
    }

    /* Smooth transitions for all interactive elements */
    button, [role="button"] {
      transition: all 0.2s ease;
    }

    /* Chart canvas responsiveness */
    .chart-container {
      position: relative;
      width: 100%;
    }

    @media (min-width: 768px) {
      .chart-container {
        aspect-ratio: 2 / 1;
      }
    }

    @media (max-width: 767px) {
      .chart-container {
        aspect-ratio: 16 / 9;
      }
    }
  </style>
</head>

<body class="min-h-screen">

  <!-- ===== MAIN CONTAINER ===== -->
  <div class="max-w-6xl mx-auto px-4 sm:px-6 py-6 space-y-6">

    <!-- ===== HEADER ROW ===== -->
    <header class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
      <!-- Left: Brand + Title -->
      <div class="flex items-center gap-3">
        <!-- Logo placeholder -->
        <div class="w-9 h-9 rounded-lg flex items-center justify-center text-white font-bold text-sm" style="background: hsl(var(--primary));">
          AP
        </div>
        <h1 id="page-title" class="text-xl sm:text-2xl font-bold tracking-tight">Review Insights</h1>
      </div>

      <!-- Right: Controls -->
      <div class="flex items-center gap-2 flex-wrap">
        <!-- Time Period Selector -->
        <div class="flex items-center rounded-xl p-0.5" style="background: hsl(var(--muted));">
          <button class="pill-btn active" data-period="30d" onclick="selectPeriod(this)">30d</button>
          <button class="pill-btn" data-period="90d" onclick="selectPeriod(this)">90d</button>
          <button class="pill-btn" data-period="ytd" onclick="selectPeriod(this)">YTD</button>
        </div>

        <!-- Language Toggle -->
        <div class="flex items-center rounded-xl p-0.5" style="background: hsl(var(--muted));">
          <button class="pill-btn active" data-lang="en" onclick="selectLang(this)">EN</button>
          <button class="pill-btn" data-lang="es" onclick="selectLang(this)">ES</button>
        </div>

        <!-- Dark Mode Toggle -->
        <button id="dark-toggle" onclick="toggleDark()" class="w-9 h-9 rounded-xl flex items-center justify-center" style="background: hsl(var(--muted));" title="Toggle dark mode">
          <i id="dark-icon-sun" data-lucide="sun" class="w-4 h-4 hidden" style="color: hsl(var(--foreground));"></i>
          <i id="dark-icon-moon" data-lucide="moon" class="w-4 h-4" style="color: hsl(var(--foreground));"></i>
        </button>
      </div>
    </header>

    <!-- ===== TAB BAR ===== -->
    <div class="flex gap-1 border-b" style="border-color: hsl(var(--border));">
      <button class="tab-btn active" data-tab="overview" onclick="switchTab('overview', this)" id="tab-overview">Overview</button>
      <button class="tab-btn" data-tab="compete" onclick="switchTab('compete', this)" id="tab-compete">Compete</button>
    </div>

    <!-- ===== OVERVIEW TAB CONTENT ===== -->
    <div id="content-overview" class="space-y-4">

      <!-- ===== FLAVOR HERO CARD ===== -->
      <div class="card p-6 space-y-5">
        <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4">
          <!-- Left: Score -->
          <div class="space-y-1">
            <div class="flex items-baseline gap-3">
              <span id="hero-score" class="text-5xl md:text-6xl font-bold tabular-nums" style="color: #10B981;">+75.3</span>
              <span id="hero-delta" class="inline-flex items-center gap-1 text-sm font-semibold px-2 py-0.5 rounded-lg" style="background: rgba(16, 185, 129, 0.1); color: #10B981;">
                <i data-lucide="trending-up" class="w-3.5 h-3.5"></i>
                +4.0
              </span>
            </div>
            <div class="flex items-center gap-2">
              <span id="hero-label" class="text-sm font-medium" style="color: hsl(var(--muted-foreground));">Flavor Index</span>
              <span class="text-xs px-2 py-0.5 rounded-md font-semibold" style="background: rgba(16, 185, 129, 0.12); color: #10B981;" id="hero-zone">World-Class</span>
            </div>
            <p class="text-xs" style="color: hsl(var(--muted-foreground));" id="hero-delta-label">
              <span class="inline-flex items-center gap-0.5"><i data-lucide="trending-up" class="w-3 h-3" style="color: #10B981;"></i> +4.0</span> <span data-i18n="fromLastPeriod">from last period</span>
            </p>
          </div>

          <!-- Right: Sparkline -->
          <div class="sparkline-container sm:max-w-[180px]">
            <canvas id="sparkline-chart"></canvas>
          </div>
        </div>

        <!-- Star Distribution Bar -->
        <div class="space-y-2">
          <div class="flex items-center justify-between">
            <span class="text-sm font-medium" style="color: hsl(var(--muted-foreground));" id="hero-total-label">
              <span class="font-bold" style="color: hsl(var(--foreground));">150</span> <span data-i18n="totalReviews">Total Reviews</span>
            </span>
            <span class="text-sm font-medium tabular-nums" style="color: hsl(var(--muted-foreground));">
              <i data-lucide="star" class="w-3.5 h-3.5 inline" style="color: #F59E0B; fill: #F59E0B;"></i>
              <span id="hero-avg-rating">4.71</span>
              <span class="text-xs" data-i18n="avgRating">Avg Rating</span>
            </span>
          </div>

          <!-- 3-segment bar -->
          <div class="h-3 rounded-full overflow-hidden flex" style="background: hsl(var(--muted));">
            <div class="h-full transition-all duration-500" style="width: 82%; background: #22C55E; border-radius: 9999px 0 0 9999px;"></div>
            <div class="h-full transition-all duration-500" style="width: 11.3%; background: #F59E0B;"></div>
            <div class="h-full transition-all duration-500" style="width: 6.7%; background: #EF4444; border-radius: 0 9999px 9999px 0;"></div>
          </div>

          <!-- Distribution labels -->
          <div class="flex flex-wrap gap-x-4 gap-y-1 text-xs" style="color: hsl(var(--muted-foreground));">
            <span class="inline-flex items-center gap-1.5">
              <span class="w-2 h-2 rounded-full inline-block" style="background: #22C55E;"></span>
              82% <span data-i18n="lovingFlavor">Loving the Flavor</span>
            </span>
            <span class="inline-flex items-center gap-1.5">
              <span class="w-2 h-2 rounded-full inline-block" style="background: #F59E0B;"></span>
              11% <span data-i18n="onFence">On the Fence</span>
            </span>
            <span class="inline-flex items-center gap-1.5">
              <span class="w-2 h-2 rounded-full inline-block" style="background: #EF4444;"></span>
              7% <span data-i18n="notFeeling">Not Feeling It</span>
            </span>
          </div>
        </div>
      </div>

      <!-- ===== CATEGORY SENTIMENT BREAKDOWN ===== -->
      <div class="card p-6 space-y-4">
        <h2 class="text-sm font-semibold uppercase tracking-wider" style="color: hsl(var(--muted-foreground));" id="category-title">
          <i data-lucide="bar-chart-3" class="w-4 h-4 inline mr-1.5" style="vertical-align: -2px;"></i>
          <span data-i18n="categorySentiment">Category Sentiment</span>
        </h2>

        <div class="space-y-3">
          <!-- Food Quality -->
          <div class="space-y-1">
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium" data-i18n="foodQuality">Food Quality</span>
              <span class="text-sm font-semibold tabular-nums" style="color: #22C55E;">0.85</span>
            </div>
            <div class="h-2 rounded-full overflow-hidden" style="background: hsl(var(--muted));">
              <div class="h-full rounded-full transition-all duration-700" style="width: 85%; background: #22C55E;"></div>
            </div>
          </div>

          <!-- Ambience -->
          <div class="space-y-1">
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium" data-i18n="ambience">Ambience</span>
              <span class="text-sm font-semibold tabular-nums" style="color: #22C55E;">0.73</span>
            </div>
            <div class="h-2 rounded-full overflow-hidden" style="background: hsl(var(--muted));">
              <div class="h-full rounded-full transition-all duration-700" style="width: 73%; background: #22C55E;"></div>
            </div>
          </div>

          <!-- Service -->
          <div class="space-y-1">
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium" data-i18n="service">Service</span>
              <span class="text-sm font-semibold tabular-nums" style="color: #22C55E;">0.70</span>
            </div>
            <div class="h-2 rounded-full overflow-hidden" style="background: hsl(var(--muted));">
              <div class="h-full rounded-full transition-all duration-700" style="width: 70%; background: #22C55E;"></div>
            </div>
          </div>

          <!-- Value -->
          <div class="space-y-1">
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium" data-i18n="value">Value</span>
              <span class="text-sm font-semibold tabular-nums" style="color: #F59E0B;">0.51</span>
            </div>
            <div class="h-2 rounded-full overflow-hidden" style="background: hsl(var(--muted));">
              <div class="h-full rounded-full transition-all duration-700" style="width: 51%; background: #F59E0B;"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- ===== HIGH SEVERITY ALERTS ===== -->
      <div class="card p-6 space-y-4">
        <h2 class="text-sm font-semibold uppercase tracking-wider flex items-center gap-2" style="color: hsl(var(--muted-foreground));">
          <i data-lucide="alert-triangle" class="w-4 h-4" style="color: #EF4444;"></i>
          <span data-i18n="highSeverityAlerts">High Severity Alerts</span>
          <span class="text-xs font-bold px-1.5 py-0.5 rounded-md" style="background: rgba(239, 68, 68, 0.12); color: #EF4444;">2</span>
        </h2>

        <!-- Alert 1: Critical -->
        <div class="card severity-critical p-4 space-y-2" style="border-radius: 0.75rem;">
          <div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0" style="background: rgba(239, 68, 68, 0.12);">
              <i data-lucide="alert-triangle" class="w-4 h-4" style="color: #EF4444;"></i>
            </div>
            <div class="space-y-1 min-w-0">
              <h3 class="text-sm font-bold" style="color: #EF4444;">Health & Safety Flag</h3>
              <p class="text-sm" style="color: hsl(var(--muted-foreground));">
                "Customer reported finding foreign object in soup. Incident needs immediate documentation and follow-up with kitchen team."
              </p>
              <p class="text-xs" style="color: hsl(var(--muted-foreground)); opacity: 0.7;">
                Feb 15, 2026 &mdash; Alamo Prime Steakhouse
              </p>
            </div>
          </div>
        </div>

        <!-- Alert 2: High -->
        <div class="card severity-high p-4 space-y-2" style="border-radius: 0.75rem;">
          <div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0" style="background: rgba(245, 158, 11, 0.12);">
              <i data-lucide="alert-triangle" class="w-4 h-4" style="color: #F59E0B;"></i>
            </div>
            <div class="space-y-1 min-w-0">
              <h3 class="text-sm font-bold" style="color: #F59E0B;">Staff Conduct Issue</h3>
              <p class="text-sm" style="color: hsl(var(--muted-foreground));">
                "Server was rude to a table of 6 and made inappropriate comments about dietary restrictions. Multiple diners mentioned this."
              </p>
              <p class="text-xs" style="color: hsl(var(--muted-foreground)); opacity: 0.7;">
                Feb 10, 2026 &mdash; Alamo Prime Steakhouse
              </p>
            </div>
          </div>
        </div>
      </div>

    </div><!-- end #content-overview -->

    <!-- ===== COMPETE TAB CONTENT ===== -->
    <div id="content-compete" class="space-y-4 hidden">

      <!-- ===== COMPETITOR SCORECARDS ===== -->
      <div class="flex gap-4 overflow-x-auto scroll-snap-x pb-2 md:grid md:grid-cols-2 lg:grid-cols-4 md:overflow-visible" id="competitor-grid">

        <!-- Card 1: Alamo Prime (own) -->
        <div class="competitor-card card card-hover own-restaurant p-5 space-y-3 relative">
          <span class="absolute top-3 right-3 text-xs font-bold px-2 py-0.5 rounded-md" style="background: rgba(42, 169, 98, 0.15); color: hsl(var(--primary));" data-i18n="you">You</span>
          <h3 class="text-sm font-bold pr-10">Alamo Prime</h3>
          <div class="space-y-1">
            <span class="text-3xl font-bold tabular-nums" style="color: #10B981;">+75.3</span>
            <div class="flex items-center gap-1.5">
              <span class="text-xs font-semibold px-1.5 py-0.5 rounded" style="background: rgba(16, 185, 129, 0.12); color: #10B981;" data-i18n="worldClass">World-Class</span>
              <span class="text-xs font-semibold flex items-center gap-0.5" style="color: #10B981;">
                <i data-lucide="trending-up" class="w-3 h-3"></i> +4.0
              </span>
            </div>
          </div>
          <!-- Mini distribution bar -->
          <div class="h-2 rounded-full overflow-hidden flex" style="background: hsl(var(--muted));">
            <div class="h-full" style="width: 82%; background: #22C55E; border-radius: 9999px 0 0 9999px;"></div>
            <div class="h-full" style="width: 11.3%; background: #F59E0B;"></div>
            <div class="h-full" style="width: 6.7%; background: #EF4444; border-radius: 0 9999px 9999px 0;"></div>
          </div>
          <div class="flex items-center justify-between text-xs" style="color: hsl(var(--muted-foreground));">
            <span>150 <span data-i18n="reviews">reviews</span></span>
            <span class="tabular-nums"><i data-lucide="star" class="w-3 h-3 inline" style="color: #F59E0B; fill: #F59E0B;"></i> 4.71</span>
          </div>
        </div>

        <!-- Card 2: Longhorn & Ember -->
        <div class="competitor-card card card-hover p-5 space-y-3">
          <h3 class="text-sm font-bold">Longhorn & Ember</h3>
          <div class="space-y-1">
            <span class="text-3xl font-bold tabular-nums" style="color: #84CC16;">+48.0</span>
            <div class="flex items-center gap-1.5">
              <span class="text-xs font-semibold px-1.5 py-0.5 rounded" style="background: rgba(132, 204, 22, 0.12); color: #84CC16;" data-i18n="great">Great</span>
              <span class="text-xs font-semibold flex items-center gap-0.5" style="color: #10B981;">
                <i data-lucide="trending-up" class="w-3 h-3"></i> +2.1
              </span>
            </div>
          </div>
          <div class="h-2 rounded-full overflow-hidden flex" style="background: hsl(var(--muted));">
            <div class="h-full" style="width: 67%; background: #22C55E; border-radius: 9999px 0 0 9999px;"></div>
            <div class="h-full" style="width: 14%; background: #F59E0B;"></div>
            <div class="h-full" style="width: 19%; background: #EF4444; border-radius: 0 9999px 9999px 0;"></div>
          </div>
          <div class="flex items-center justify-between text-xs" style="color: hsl(var(--muted-foreground));">
            <span>100 <span data-i18n="reviews">reviews</span></span>
            <span class="tabular-nums"><i data-lucide="star" class="w-3 h-3 inline" style="color: #F59E0B; fill: #F59E0B;"></i> 4.33</span>
          </div>
        </div>

        <!-- Card 3: Salt & Sear -->
        <div class="competitor-card card card-hover p-5 space-y-3">
          <h3 class="text-sm font-bold">Salt & Sear Chophouse</h3>
          <div class="space-y-1">
            <span class="text-3xl font-bold tabular-nums" style="color: #F59E0B;">+25.0</span>
            <div class="flex items-center gap-1.5">
              <span class="text-xs font-semibold px-1.5 py-0.5 rounded" style="background: rgba(245, 158, 11, 0.12); color: #F59E0B;" data-i18n="good">Good</span>
              <span class="text-xs font-semibold flex items-center gap-0.5" style="color: #EF4444;">
                <i data-lucide="trending-down" class="w-3 h-3"></i> -3.5
              </span>
            </div>
          </div>
          <div class="h-2 rounded-full overflow-hidden flex" style="background: hsl(var(--muted));">
            <div class="h-full" style="width: 53.75%; background: #22C55E; border-radius: 9999px 0 0 9999px;"></div>
            <div class="h-full" style="width: 17.5%; background: #F59E0B;"></div>
            <div class="h-full" style="width: 28.75%; background: #EF4444; border-radius: 0 9999px 9999px 0;"></div>
          </div>
          <div class="flex items-center justify-between text-xs" style="color: hsl(var(--muted-foreground));">
            <span>80 <span data-i18n="reviews">reviews</span></span>
            <span class="tabular-nums"><i data-lucide="star" class="w-3 h-3 inline" style="color: #F59E0B; fill: #F59E0B;"></i> 3.91</span>
          </div>
        </div>

        <!-- Card 4: Mesquite Flame -->
        <div class="competitor-card card card-hover p-5 space-y-3">
          <h3 class="text-sm font-bold">Mesquite Flame Grill</h3>
          <div class="space-y-1">
            <span class="text-3xl font-bold tabular-nums" style="color: #EF4444;">-5.0</span>
            <div class="flex items-center gap-1.5">
              <span class="text-xs font-semibold px-1.5 py-0.5 rounded" style="background: rgba(239, 68, 68, 0.12); color: #EF4444;" data-i18n="needsImprovement">Needs Improvement</span>
              <span class="text-xs font-semibold flex items-center gap-0.5" style="color: #EF4444;">
                <i data-lucide="trending-down" class="w-3 h-3"></i> -1.2
              </span>
            </div>
          </div>
          <div class="h-2 rounded-full overflow-hidden flex" style="background: hsl(var(--muted));">
            <div class="h-full" style="width: 36.67%; background: #22C55E; border-radius: 9999px 0 0 9999px;"></div>
            <div class="h-full" style="width: 21.67%; background: #F59E0B;"></div>
            <div class="h-full" style="width: 41.67%; background: #EF4444; border-radius: 0 9999px 9999px 0;"></div>
          </div>
          <div class="flex items-center justify-between text-xs" style="color: hsl(var(--muted-foreground));">
            <span>60 <span data-i18n="reviews">reviews</span></span>
            <span class="tabular-nums"><i data-lucide="star" class="w-3 h-3 inline" style="color: #F59E0B; fill: #F59E0B;"></i> 3.40</span>
          </div>
        </div>

      </div>

      <!-- ===== TOGGLE CHIPS ===== -->
      <div class="flex flex-wrap gap-2 justify-center">
        <button class="toggle-chip active" style="--chip-color: #2aa962;" data-series="alamo" onclick="toggleSeries(this)">
          <span class="dot"></span>
          Alamo Prime
        </button>
        <button class="toggle-chip active" style="--chip-color: #6366F1;" data-series="longhorn" onclick="toggleSeries(this)">
          <span class="dot"></span>
          Longhorn & Ember
        </button>
        <button class="toggle-chip active" style="--chip-color: #EC4899;" data-series="salt" onclick="toggleSeries(this)">
          <span class="dot"></span>
          Salt & Sear
        </button>
        <button class="toggle-chip active" style="--chip-color: #8B5CF6;" data-series="mesquite" onclick="toggleSeries(this)">
          <span class="dot"></span>
          Mesquite Flame
        </button>
      </div>

      <!-- ===== TREND CHART ===== -->
      <div class="card p-6">
        <h2 class="text-sm font-semibold uppercase tracking-wider mb-4" style="color: hsl(var(--muted-foreground));">
          <i data-lucide="trending-up" class="w-4 h-4 inline mr-1.5" style="vertical-align: -2px;"></i>
          <span data-i18n="flavorIndex">Flavor Index</span> Trend
        </h2>
        <div class="chart-container">
          <canvas id="trend-chart"></canvas>
        </div>
      </div>

    </div><!-- end #content-compete -->

  </div><!-- end .max-w-6xl -->


  <!-- ===== JAVASCRIPT ===== -->
  <script>
    // =========================================================================
    // BILINGUAL LABELS
    // =========================================================================
    const i18n = {
      en: {
        pageTitle: 'Review Insights',
        overview: 'Overview',
        compete: 'Compete',
        flavorIndex: 'Flavor Index',
        worldClass: 'World-Class',
        excellent: 'Excellent',
        great: 'Great',
        good: 'Good',
        needsImprovement: 'Needs Improvement',
        lovingFlavor: 'Loving the Flavor',
        onFence: 'On the Fence',
        notFeeling: 'Not Feeling It',
        totalReviews: 'Total Reviews',
        fromLastPeriod: 'from last period',
        foodQuality: 'Food Quality',
        service: 'Service',
        ambience: 'Ambience',
        value: 'Value',
        highSeverityAlerts: 'High Severity Alerts',
        categorySentiment: 'Category Sentiment',
        avgRating: 'Avg Rating',
        reviews: 'reviews',
        you: 'You',
      },
      es: {
        pageTitle: 'Perspectivas de Rese\u00f1as',
        overview: 'Resumen',
        compete: 'Competencia',
        flavorIndex: '\u00cdndice de Sabor',
        worldClass: 'Clase Mundial',
        excellent: 'Excelente',
        great: 'Muy Bueno',
        good: 'Bueno',
        needsImprovement: 'Necesita Mejorar',
        lovingFlavor: 'Amando el Sabor',
        onFence: 'Indecisos',
        notFeeling: 'Sin Sabor',
        totalReviews: 'Total de Rese\u00f1as',
        fromLastPeriod: 'del periodo anterior',
        foodQuality: 'Calidad de Comida',
        service: 'Servicio',
        ambience: 'Ambiente',
        value: 'Valor',
        highSeverityAlerts: 'Alertas de Alta Severidad',
        categorySentiment: 'Sentimiento por Categor\u00eda',
        avgRating: 'Calificaci\u00f3n Prom.',
        reviews: 'rese\u00f1as',
        you: 'T\u00fa',
      },
    };

    let currentLang = 'en';

    // =========================================================================
    // PERIOD SELECTOR
    // =========================================================================
    function selectPeriod(btn) {
      btn.parentElement.querySelectorAll('.pill-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
    }

    // =========================================================================
    // LANGUAGE TOGGLE
    // =========================================================================
    function selectLang(btn) {
      btn.parentElement.querySelectorAll('.pill-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentLang = btn.dataset.lang;
      applyLanguage();
    }

    function applyLanguage() {
      const strings = i18n[currentLang];

      // Page title
      document.getElementById('page-title').textContent = strings.pageTitle;

      // Tabs
      document.getElementById('tab-overview').textContent = strings.overview;
      document.getElementById('tab-compete').textContent = strings.compete;
      // Re-apply active class
      document.querySelectorAll('.tab-btn').forEach(t => {
        if (t.dataset.tab === currentTab) t.classList.add('active');
      });

      // All data-i18n elements
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        if (strings[key] !== undefined) {
          el.textContent = strings[key];
        }
      });

      // Update hero label
      document.getElementById('hero-label').textContent = strings.flavorIndex;
    }

    // =========================================================================
    // DARK MODE TOGGLE
    // =========================================================================
    function toggleDark() {
      const html = document.documentElement;
      html.classList.toggle('dark');
      const isDark = html.classList.contains('dark');
      document.getElementById('dark-icon-sun').classList.toggle('hidden', !isDark);
      document.getElementById('dark-icon-moon').classList.toggle('hidden', isDark);

      // Recreate charts with new colors
      createSparkline();
      if (currentTab === 'compete' && trendChartInstance) {
        createTrendChart();
      } else if (trendChartInstance) {
        // Destroy so it gets recreated fresh when tab opens
        trendChartInstance.destroy();
        trendChartInstance = null;
      }
    }

    // =========================================================================
    // TAB SWITCHING
    // =========================================================================
    let currentTab = 'overview';

    function switchTab(tab, btn) {
      currentTab = tab;
      document.querySelectorAll('.tab-btn').forEach(t => t.classList.remove('active'));
      btn.classList.add('active');

      document.getElementById('content-overview').classList.toggle('hidden', tab !== 'overview');
      document.getElementById('content-compete').classList.toggle('hidden', tab !== 'compete');

      if (tab === 'compete' && !trendChartInstance) {
        // Need to wait for DOM to be visible before creating chart
        requestAnimationFrame(() => createTrendChart());
      }
    }

    // =========================================================================
    // COMPETITOR TOGGLE CHIPS
    // =========================================================================
    const seriesVisibility = { alamo: true, longhorn: true, salt: true, mesquite: true };

    function toggleSeries(btn) {
      const series = btn.dataset.series;
      seriesVisibility[series] = !seriesVisibility[series];
      btn.classList.toggle('active', seriesVisibility[series]);

      if (trendChartInstance) {
        const indexMap = { alamo: 0, longhorn: 1, salt: 2, mesquite: 3 };
        const idx = indexMap[series];
        trendChartInstance.setDatasetVisibility(idx, seriesVisibility[series]);
        trendChartInstance.update();
      }
    }

    // =========================================================================
    // CHART HELPERS
    // =========================================================================
    function getChartTextColor() {
      return document.documentElement.classList.contains('dark') ? '#B7B7C2' : '#5A5A66';
    }

    function getChartGridColor() {
      return document.documentElement.classList.contains('dark') ? 'rgba(255,255,255,0.06)' : 'rgba(0,0,0,0.06)';
    }

    function getCardBg() {
      return document.documentElement.classList.contains('dark') ? '#141418' : '#FFFFFF';
    }

    // =========================================================================
    // SPARKLINE CHART
    // =========================================================================
    let sparklineInstance = null;

    function createSparkline() {
      const ctx = document.getElementById('sparkline-chart').getContext('2d');

      if (sparklineInstance) {
        sparklineInstance.destroy();
      }

      const gradient = ctx.createLinearGradient(0, 0, 0, 44);
      gradient.addColorStop(0, 'rgba(42, 169, 98, 0.3)');
      gradient.addColorStop(1, 'rgba(42, 169, 98, 0.02)');

      sparklineInstance = new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['W1', 'W2', 'W3', 'W4', 'W5', 'W6', 'W7', 'W8'],
          datasets: [{
            data: [72, 71, 73, 74, 72, 75, 74, 75.3],
            borderColor: '#2aa962',
            borderWidth: 2,
            backgroundColor: gradient,
            fill: true,
            tension: 0.4,
            pointRadius: 0,
            pointHitRadius: 0,
          }],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: false }, tooltip: { enabled: false } },
          scales: {
            x: { display: false },
            y: { display: false, min: 68, max: 78 },
          },
          elements: { line: { borderCapStyle: 'round' } },
          animation: { duration: 800 },
        },
      });
    }

    // =========================================================================
    // TREND CHART
    // =========================================================================
    let trendChartInstance = null;

    function createTrendChart() {
      const ctx = document.getElementById('trend-chart');
      if (!ctx) return;

      if (trendChartInstance) {
        trendChartInstance.destroy();
      }

      const labels = ['Dec 2', 'Dec 9', 'Dec 16', 'Dec 23', 'Dec 30', 'Jan 6', 'Jan 13', 'Jan 20', 'Jan 27', 'Feb 3', 'Feb 10', 'Feb 17'];

      const datasets = [
        {
          label: 'Alamo Prime',
          data: [68, 70, 72, 71, 73, 74, 72, 75, 74, 76, 75, 75.3],
          borderColor: '#2aa962',
          backgroundColor: 'rgba(42, 169, 98, 0.08)',
          borderWidth: 3,
          tension: 0.35,
          pointRadius: 0,
          pointHoverRadius: 5,
          pointHoverBackgroundColor: '#2aa962',
          pointHoverBorderColor: getCardBg(),
          pointHoverBorderWidth: 2,
          fill: false,
          hidden: !seriesVisibility.alamo,
        },
        {
          label: 'Longhorn & Ember',
          data: [42, 44, 43, 45, 46, 44, 47, 46, 48, 47, 49, 48.0],
          borderColor: '#6366F1',
          backgroundColor: 'rgba(99, 102, 241, 0.08)',
          borderWidth: 2,
          tension: 0.35,
          pointRadius: 0,
          pointHoverRadius: 5,
          pointHoverBackgroundColor: '#6366F1',
          pointHoverBorderColor: getCardBg(),
          pointHoverBorderWidth: 2,
          fill: false,
          hidden: !seriesVisibility.longhorn,
        },
        {
          label: 'Salt & Sear',
          data: [30, 32, 31, 29, 28, 27, 26, 25, 24, 25, 26, 25.0],
          borderColor: '#EC4899',
          backgroundColor: 'rgba(236, 72, 153, 0.08)',
          borderWidth: 2,
          tension: 0.35,
          pointRadius: 0,
          pointHoverRadius: 5,
          pointHoverBackgroundColor: '#EC4899',
          pointHoverBorderColor: getCardBg(),
          pointHoverBorderWidth: 2,
          fill: false,
          hidden: !seriesVisibility.salt,
        },
        {
          label: 'Mesquite Flame',
          data: [-2, -3, -1, -4, -3, -5, -4, -6, -5, -4, -5, -5.0],
          borderColor: '#8B5CF6',
          backgroundColor: 'rgba(139, 92, 246, 0.08)',
          borderWidth: 2,
          tension: 0.35,
          pointRadius: 0,
          pointHoverRadius: 5,
          pointHoverBackgroundColor: '#8B5CF6',
          pointHoverBorderColor: getCardBg(),
          pointHoverBorderWidth: 2,
          fill: false,
          hidden: !seriesVisibility.mesquite,
        },
      ];

      const textColor = getChartTextColor();
      const gridColor = getChartGridColor();

      trendChartInstance = new Chart(ctx, {
        type: 'line',
        data: { labels, datasets },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          interaction: {
            mode: 'index',
            intersect: false,
          },
          plugins: {
            legend: { display: false },
            tooltip: {
              backgroundColor: document.documentElement.classList.contains('dark') ? '#1E1E24' : '#FFFFFF',
              titleColor: document.documentElement.classList.contains('dark') ? '#F5F5F7' : '#111114',
              bodyColor: document.documentElement.classList.contains('dark') ? '#B7B7C2' : '#5A5A66',
              borderColor: document.documentElement.classList.contains('dark') ? '#2A2A33' : '#E6E6EB',
              borderWidth: 1,
              cornerRadius: 10,
              padding: 12,
              boxPadding: 4,
              usePointStyle: true,
              callbacks: {
                label: function(context) {
                  const val = context.parsed.y;
                  const sign = val >= 0 ? '+' : '';
                  return ` ${context.dataset.label}: ${sign}${val.toFixed(1)}`;
                },
              },
            },
          },
          scales: {
            x: {
              grid: { display: false },
              ticks: {
                color: textColor,
                font: { size: 11 },
                maxRotation: 0,
                callback: function(val, index) {
                  // Show every other label on mobile
                  if (window.innerWidth < 768 && index % 2 !== 0) return '';
                  return this.getLabelForValue(val);
                },
              },
              border: { display: false },
            },
            y: {
              min: -25,
              max: 100,
              grid: {
                color: function(context) {
                  if (context.tick.value === 0) {
                    return document.documentElement.classList.contains('dark') ? 'rgba(255,255,255,0.15)' : 'rgba(0,0,0,0.15)';
                  }
                  return gridColor;
                },
                lineWidth: function(context) {
                  return context.tick.value === 0 ? 1.5 : 0.5;
                },
                drawBorder: false,
              },
              ticks: {
                color: textColor,
                font: { size: 11 },
                stepSize: 25,
                callback: function(val) {
                  const sign = val >= 0 ? '+' : '';
                  return `${sign}${val}`;
                },
              },
              border: { display: false, dash: [4, 4] },
            },
          },
          animation: { duration: 1000, easing: 'easeOutQuart' },
        },
      });
    }

    // =========================================================================
    // INITIALIZATION
    // =========================================================================
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize Lucide icons
      lucide.createIcons();

      // Create sparkline
      createSparkline();

      // Apply default language
      applyLanguage();
    });
  </script>

</body>
</html>